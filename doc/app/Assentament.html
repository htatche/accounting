<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">

<title>class Assentament - Rails Application Documentation</title>

<link type="text/css" media="screen" href="./rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script type="text/javascript" charset="utf-8" src="./js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="./index.html">Home</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/assets/assentament.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link"><a href="Object.html">Object</a>
  
</nav>

    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-c-new">::new</a>
    
    <li><a href="#method-i-comptabilitzarAll">#comptabilitzarAll</a>
    
    <li><a href="#method-i-compte">#compte</a>
    
    <li><a href="#method-i-ctcte">#ctcte</a>
    
    <li><a href="#method-i-ctdesc">#ctdesc</a>
    
    <li><a href="#method-i-destroy">#destroy</a>
    
    <li><a href="#method-i-errors">#errors</a>
    
    <li><a href="#method-i-errors_push">#errors_push</a>
    
    <li><a href="#method-i-getCompte">#getCompte</a>
    
    <li><a href="#method-i-grup">#grup</a>
    
    <li><a href="#method-i-import">#import</a>
    
    <li><a href="#method-i-opckey">#opckey</a>
    
    <li><a href="#method-i-validateAll">#validateAll</a>
    
    <li><a href="#method-i-validateAssGeneral">#validateAssGeneral</a>
    
    <li><a href="#method-i-validateCompte">#validateCompte</a>
    
    <li><a href="#method-i-validateContrapartida">#validateContrapartida</a>
    
    <li><a href="#method-i-validateImpostos">#validateImpostos</a>
    
    <li><a href="#method-i-validateNumdoc">#validateNumdoc</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="./doc/README_FOR_APP.html">README_FOR_APP</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="./ApplicationController.html">ApplicationController</a>
  
    <li><a href="./ApplicationHelper.html">ApplicationHelper</a>
  
    <li><a href="./Assentament.html">Assentament</a>
  
    <li><a href="./AssentamentsController.html">AssentamentsController</a>
  
    <li><a href="./AssentamentsHelper.html">AssentamentsHelper</a>
  
    <li><a href="./Assistit.html">Assistit</a>
  
    <li><a href="./AssistitsController.html">AssistitsController</a>
  
    <li><a href="./AssistitsHelper.html">AssistitsHelper</a>
  
    <li><a href="./Brain.html">Brain</a>
  
    <li><a href="./Braindet.html">Braindet</a>
  
    <li><a href="./Compte.html">Compte</a>
  
    <li><a href="./ComptesController.html">ComptesController</a>
  
    <li><a href="./ComptesHelper.html">ComptesHelper</a>
  
    <li><a href="./Empresa.html">Empresa</a>
  
    <li><a href="./Histgen.html">Histgen</a>
  
    <li><a href="./Histimp.html">Histimp</a>
  
    <li><a href="./Historial.html">Historial</a>
  
    <li><a href="./Histpag.html">Histpag</a>
  
    <li><a href="./MainController.html">MainController</a>
  
    <li><a href="./MainHelper.html">MainHelper</a>
  
    <li><a href="./Menu.html">Menu</a>
  
    <li><a href="./MenuController.html">MenuController</a>
  
    <li><a href="./MenuHelper.html">MenuHelper</a>
  
    <li><a href="./Menudet.html">Menudet</a>
  
    <li><a href="./Menulit.html">Menulit</a>
  
    <li><a href="./Moviment.html">Moviment</a>
  
    <li><a href="./MovimentsController.html">MovimentsController</a>
  
    <li><a href="./MovimentsHelper.html">MovimentsHelper</a>
  
    <li><a href="./Object.html">Object</a>
  
    <li><a href="./Pgc.html">Pgc</a>
  
    <li><a href="./PgcHelper.html">PgcHelper</a>
  
    <li><a href="./PgcsController.html">PgcsController</a>
  
    <li><a href="./String.html">String</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class Assentament</h1>

  <div id="description" class="description">
    
  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    <!-- Methods -->
    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(params)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/assets/assentament.rb, line 3</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">params</span>)
  <span class="ruby-ivar">@errors</span> = []
  
  <span class="ruby-ivar">@ctcte</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ctcte</span>] <span class="ruby-operator">||</span> <span class="ruby-string">''</span>
  <span class="ruby-ivar">@ctdesc</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:ctdesc</span>] <span class="ruby-operator">||</span> <span class="ruby-string">''</span>
  <span class="ruby-ivar">@numdoc</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:numdoc</span>] <span class="ruby-operator">||</span> <span class="ruby-string">''</span>
  <span class="ruby-ivar">@opckey</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:opckey</span>]
  <span class="ruby-ivar">@import</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:import</span>].<span class="ruby-identifier">sanitizeCurrency</span>
  <span class="ruby-ivar">@date</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:date</span>]
  <span class="ruby-ivar">@comentari</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:comentari</span>] <span class="ruby-operator">||</span> <span class="ruby-string">''</span>
  <span class="ruby-ivar">@auto</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:assignar_codi_auto</span>] <span class="ruby-operator">||</span> <span class="ruby-keyword">true</span>

  <span class="ruby-ivar">@contrapartides</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:apunts</span>] <span class="ruby-operator">||</span> []
  <span class="ruby-ivar">@impostos</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:imp</span>] <span class="ruby-operator">||</span> []
  <span class="ruby-ivar">@pagaments</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:pag</span>] <span class="ruby-operator">||</span> []

  <span class="ruby-ivar">@grup</span> = <span class="ruby-constant">Brain</span>.<span class="ruby-identifier">grupOri</span>(<span class="ruby-ivar">@opckey</span>)
  <span class="ruby-ivar">@lits</span> = <span class="ruby-constant">Menulit</span>.<span class="ruby-identifier">find_by_opckey</span>(<span class="ruby-ivar">@opckey</span>)

  <span class="ruby-ivar">@numcompte</span> = <span class="ruby-string">''</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- new-source -->
          
        </div>

        

        
      </div><!-- new-method -->

    
    </section><!-- public-class-method-details -->
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-comptabilitzarAll" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">comptabilitzarAll</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="comptabilitzarAll-source">
            <pre><span class="ruby-comment"># File lib/assets/assentament.rb, line 209</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">comptabilitzarAll</span>
    
<span class="ruby-keyword">end</span></pre>
          </div><!-- comptabilitzarAll-source -->
          
        </div>

        

        
      </div><!-- comptabilitzarAll-method -->

    
      <div id="method-i-compte" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">compte</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="compte-source">
            <pre><span class="ruby-comment"># File lib/assets/assentament.rb, line 49</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">compte</span>
  <span class="ruby-ivar">@compte</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- compte-source -->
          
        </div>

        

        
      </div><!-- compte-method -->

    
      <div id="method-i-ctcte" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">ctcte</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="ctcte-source">
            <pre><span class="ruby-comment"># File lib/assets/assentament.rb, line 25</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">ctcte</span>
  <span class="ruby-ivar">@ctcte</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- ctcte-source -->
          
        </div>

        

        
      </div><!-- ctcte-method -->

    
      <div id="method-i-ctdesc" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">ctdesc</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="ctdesc-source">
            <pre><span class="ruby-comment"># File lib/assets/assentament.rb, line 29</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">ctdesc</span>
  <span class="ruby-ivar">@ctdesc</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- ctdesc-source -->
          
        </div>

        

        
      </div><!-- ctdesc-method -->

    
      <div id="method-i-destroy" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">destroy</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="destroy-source">
            <pre><span class="ruby-comment"># File lib/assets/assentament.rb, line 218</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">destroy</span>

<span class="ruby-keyword">end</span></pre>
          </div><!-- destroy-source -->
          
        </div>

        

        
      </div><!-- destroy-method -->

    
      <div id="method-i-errors" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">errors</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="errors-source">
            <pre><span class="ruby-comment"># File lib/assets/assentament.rb, line 53</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">errors</span>
  <span class="ruby-ivar">@errors</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- errors-source -->
          
        </div>

        

        
      </div><!-- errors-method -->

    
      <div id="method-i-errors_push" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">errors_push</span><span
            class="method-args">(errors)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="errors_push-source">
            <pre><span class="ruby-comment"># File lib/assets/assentament.rb, line 213</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">errors_push</span>(<span class="ruby-identifier">errors</span>)
  <span class="ruby-ivar">@errors</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">errors</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">any?</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- errors_push-source -->
          
        </div>

        

        
      </div><!-- errors_push-method -->

    
      <div id="method-i-getCompte" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">getCompte</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="getCompte-source">
            <pre><span class="ruby-comment"># File lib/assets/assentament.rb, line 57</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">getCompte</span>
  <span class="ruby-ivar">@compte</span> = <span class="ruby-constant">Compte</span>.<span class="ruby-identifier">find_by_ctcte_or_new</span>(<span class="ruby-ivar">@grup</span>, <span class="ruby-ivar">@numcompte</span>, <span class="ruby-ivar">@ctdesc</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- getCompte-source -->
          
        </div>

        

        
      </div><!-- getCompte-method -->

    
      <div id="method-i-grup" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">grup</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="grup-source">
            <pre><span class="ruby-comment"># File lib/assets/assentament.rb, line 33</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">grup</span>
  <span class="ruby-ivar">@grup</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- grup-source -->
          
        </div>

        

        
      </div><!-- grup-method -->

    
      <div id="method-i-import" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">import</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="import-source">
            <pre><span class="ruby-comment"># File lib/assets/assentament.rb, line 41</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">import</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@import</span>
    <span class="ruby-ivar">@import</span>.<span class="ruby-identifier">sanitizeCurrency</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@import</span> = <span class="ruby-string">''</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- import-source -->
          
        </div>

        

        
      </div><!-- import-method -->

    
      <div id="method-i-opckey" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">opckey</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="opckey-source">
            <pre><span class="ruby-comment"># File lib/assets/assentament.rb, line 37</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">opckey</span>
  <span class="ruby-ivar">@opckey</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- opckey-source -->
          
        </div>

        

        
      </div><!-- opckey-method -->

    
      <div id="method-i-validateAll" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">validateAll</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="validateAll-source">
            <pre><span class="ruby-comment"># File lib/assets/assentament.rb, line 192</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">validateAll</span>
  <span class="ruby-identifier">errors</span> = <span class="ruby-identifier">validateCompte</span>
  <span class="ruby-identifier">errors_push</span>(<span class="ruby-identifier">errors</span>)

  <span class="ruby-identifier">errors</span> = <span class="ruby-identifier">validateNumdoc</span>
  <span class="ruby-identifier">errors_push</span>(<span class="ruby-identifier">errors</span>)

  <span class="ruby-identifier">errors</span> = <span class="ruby-identifier">validateAssGeneral</span>
  <span class="ruby-identifier">errors_push</span>(<span class="ruby-identifier">errors</span>)

  <span class="ruby-identifier">errors</span> = <span class="ruby-identifier">validateContrapartida</span>
  <span class="ruby-identifier">errors_push</span>(<span class="ruby-identifier">errors</span>)

  <span class="ruby-identifier">errors</span> = <span class="ruby-identifier">validateImpostos</span>
  <span class="ruby-identifier">errors_push</span>(<span class="ruby-identifier">errors</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- validateAll-source -->
          
        </div>

        

        
      </div><!-- validateAll-method -->

    
      <div id="method-i-validateAssGeneral" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">validateAssGeneral</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="validateAssGeneral-source">
            <pre><span class="ruby-comment"># File lib/assets/assentament.rb, line 112</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">validateAssGeneral</span>
    <span class="ruby-identifier">errors</span> = []

    <span class="ruby-ivar">@general</span> = <span class="ruby-constant">Historial</span>.<span class="ruby-identifier">new</span>({
      <span class="ruby-value">:brakey</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@grup</span>,
<span class="ruby-comment">#:ctkey =&gt; 0,</span>
      <span class="ruby-value">:numdoc</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@numdoc</span>,
      <span class="ruby-value">:datdoc</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@date</span>,
      <span class="ruby-value">:datsis</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Date</span>.<span class="ruby-identifier">today</span>,
      <span class="ruby-value">:impdoc</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@import</span>,
      <span class="ruby-value">:comdoc</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@comentari</span>,
      <span class="ruby-value">:optimp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>,
      <span class="ruby-value">:optpag</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>,
      <span class="ruby-value">:optreb</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>,
      <span class="ruby-value">:indcom</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>,
      <span class="ruby-value">:datcom</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">''</span>
    })
    
    <span class="ruby-ivar">@general</span>.<span class="ruby-identifier">valid?</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@general</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">any?</span>
      <span class="ruby-identifier">errors_gen</span> = <span class="ruby-ivar">@general</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">messages</span>
      <span class="ruby-identifier">errors_gen</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">i</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">j</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">errors</span> <span class="ruby-operator">&lt;&lt;</span> {<span class="ruby-value">:field</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@lits</span>.<span class="ruby-identifier">lit7</span>, <span class="ruby-value">:msg</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">j</span>} <span class="ruby-keyword">if</span> <span class="ruby-identifier">i</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:impdoc</span>
          <span class="ruby-identifier">errors</span> <span class="ruby-operator">&lt;&lt;</span> {<span class="ruby-value">:field</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@lits</span>.<span class="ruby-identifier">lit6</span>, <span class="ruby-value">:msg</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">j</span>} <span class="ruby-keyword">if</span> <span class="ruby-identifier">i</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:datdoc</span>
        }
      }
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">return</span> <span class="ruby-identifier">errors</span>
  <span class="ruby-keyword">end</span></pre>
          </div><!-- validateAssGeneral-source -->
          
        </div>

        

        
      </div><!-- validateAssGeneral-method -->

    
      <div id="method-i-validateCompte" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">validateCompte</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="validateCompte-source">
            <pre><span class="ruby-comment"># File lib/assets/assentament.rb, line 61</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">validateCompte</span>

  <span class="ruby-identifier">errors</span> = []

  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@ctcte</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-keyword">and</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@ctdesc</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">compte</span> = <span class="ruby-constant">Compte</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">'ctcte = ?'</span>, <span class="ruby-ivar">@ctcte</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">compte</span>.<span class="ruby-identifier">present?</span>
      <span class="ruby-ivar">@numcompte</span> = <span class="ruby-ivar">@ctcte</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># Tenim que crear un nou compte</span>
      <span class="ruby-identifier">codi</span> = <span class="ruby-constant">Compte</span>.<span class="ruby-identifier">completarCodi</span>(<span class="ruby-ivar">@grup</span>, <span class="ruby-ivar">@ctcte</span>)

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">codi</span> <span class="ruby-operator">==</span> <span class="ruby-string">''</span>
        <span class="ruby-identifier">errors</span> = [{<span class="ruby-value">:field</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@lits</span>.<span class="ruby-identifier">lit4</span>,
                  <span class="ruby-value">:msg</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'te un format incorrecte'</span>}]
      <span class="ruby-keyword">else</span>
        <span class="ruby-ivar">@numcompte</span> = <span class="ruby-identifier">codi</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@ctcte</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-keyword">and</span> <span class="ruby-ivar">@ctdesc</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">compte</span> = <span class="ruby-constant">Compte</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">'ctcte = ?'</span>, <span class="ruby-ivar">@ctcte</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">compte</span>.<span class="ruby-identifier">present?</span>
      <span class="ruby-ivar">@numcompte</span> = <span class="ruby-ivar">@ctcte</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">errors</span> = [{<span class="ruby-value">:field</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@lits</span>.<span class="ruby-identifier">lit5</span>,
                <span class="ruby-value">:msg</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'no pot estar buit'</span>}]
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@ctcte</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-keyword">and</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@ctdesc</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@auto</span>
      <span class="ruby-ivar">@ctcte</span> = <span class="ruby-constant">Compte</span>.<span class="ruby-identifier">generarNou</span>(<span class="ruby-ivar">@grup</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">errors</span> = [{<span class="ruby-value">:field</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@lits</span>.<span class="ruby-identifier">lit4</span>,
                 <span class="ruby-value">:msg</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'no pot estar buit'</span>}]
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">errors</span> = [{<span class="ruby-value">:field</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@lits</span>.<span class="ruby-identifier">lit4</span>,
               <span class="ruby-value">:msg</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'no pot estar buit'</span>},
              {<span class="ruby-value">:field</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@lits</span>.<span class="ruby-identifier">lit5</span>,
               <span class="ruby-value">:msg</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'no pot estar buit'</span>}]
  
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">return</span> <span class="ruby-identifier">errors</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- validateCompte-source -->
          
        </div>

        

        
      </div><!-- validateCompte-method -->

    
      <div id="method-i-validateContrapartida" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">validateContrapartida</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="validateContrapartida-source">
            <pre><span class="ruby-comment"># File lib/assets/assentament.rb, line 144</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">validateContrapartida</span>
    <span class="ruby-identifier">errors</span> = []

    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@contrapartides</span>.<span class="ruby-identifier">present?</span>

      <span class="ruby-ivar">@contrapartides</span>.<span class="ruby-identifier">each_with_index</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">i</span>, <span class="ruby-identifier">index</span><span class="ruby-operator">|</span>

        <span class="ruby-ivar">@contrapartides</span>[<span class="ruby-identifier">index</span>] = <span class="ruby-constant">Histgen</span>.<span class="ruby-identifier">new</span>({
<span class="ruby-comment">#:historial_id =&gt; 0,</span>
          <span class="ruby-value">:ctkey</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Compte</span>.<span class="ruby-identifier">getCompteId</span>(<span class="ruby-identifier">i</span>[<span class="ruby-value">1</span>][<span class="ruby-value">:compte</span>]),
          <span class="ruby-value">:hislin</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">index</span>,
          <span class="ruby-value">:import</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">i</span>[<span class="ruby-value">1</span>][<span class="ruby-value">:import</span>].<span class="ruby-identifier">sanitizeCurrency</span>,
          <span class="ruby-value">:comen</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">i</span>[<span class="ruby-value">1</span>][<span class="ruby-value">:comment</span>]
        }) 
        
        <span class="ruby-identifier">errors</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@contrapartides</span>[<span class="ruby-identifier">index</span>].<span class="ruby-identifier">errorPresenter</span>(<span class="ruby-identifier">index</span>)
      }

    <span class="ruby-keyword">end</span>
    
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">errors</span>
  <span class="ruby-keyword">end</span></pre>
          </div><!-- validateContrapartida-source -->
          
        </div>

        

        
      </div><!-- validateContrapartida-method -->

    
      <div id="method-i-validateImpostos" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">validateImpostos</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="validateImpostos-source">
            <pre><span class="ruby-comment"># File lib/assets/assentament.rb, line 167</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">validateImpostos</span>
    <span class="ruby-identifier">errors</span> = []

    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@impostos</span>.<span class="ruby-identifier">present?</span>
      <span class="ruby-identifier">firstrow</span> = <span class="ruby-ivar">@impostos</span>.<span class="ruby-identifier">first</span>[<span class="ruby-value">1</span>][<span class="ruby-string">'import'</span>]

      <span class="ruby-comment"># Comprovem que s'hagi omplert algun import</span>
      <span class="ruby-keyword">unless</span>  <span class="ruby-ivar">@impostos</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">firstrow</span>.<span class="ruby-identifier">sanitizeCurrency</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
        <span class="ruby-ivar">@impostos</span> = []
        <span class="ruby-ivar">@impostos</span>.<span class="ruby-identifier">each_with_index</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span>, <span class="ruby-identifier">index</span><span class="ruby-operator">|</span>
          <span class="ruby-ivar">@impostos</span>[<span class="ruby-identifier">index</span>] = <span class="ruby-constant">Histimp</span>.<span class="ruby-identifier">new</span>({
<span class="ruby-comment">#      :historial_id =&gt; 0,</span>
            <span class="ruby-value">:hislin</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">index</span>,
            <span class="ruby-value">:ctkey</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Compte</span>.<span class="ruby-identifier">getCompteId</span>(<span class="ruby-identifier">i</span>[<span class="ruby-value">1</span>][<span class="ruby-value">:compte</span>]),
            <span class="ruby-value">:impbas</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'a'</span> <span class="ruby-comment">#i[1][:import].sanitizeCurrency</span>
          }) 

          <span class="ruby-identifier">errors</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@impostos</span>[<span class="ruby-identifier">index</span>].<span class="ruby-identifier">errorPresenter</span>(<span class="ruby-identifier">index</span>)
        } 
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">return</span> <span class="ruby-identifier">errors</span>
  <span class="ruby-keyword">end</span></pre>
          </div><!-- validateImpostos-source -->
          
        </div>

        

        
      </div><!-- validateImpostos-method -->

    
      <div id="method-i-validateNumdoc" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">validateNumdoc</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="validateNumdoc-source">
            <pre><span class="ruby-comment"># File lib/assets/assentament.rb, line 106</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">validateNumdoc</span>
  <span class="ruby-keyword">if</span> <span class="ruby-constant">Historial</span>.<span class="ruby-identifier">buscarFactura</span>(<span class="ruby-ivar">@opckey</span>, <span class="ruby-ivar">@numdoc</span>, <span class="ruby-ivar">@ctcte</span>)
    <span class="ruby-keyword">return</span> {<span class="ruby-value">:field</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@lits</span>.<span class="ruby-identifier">lit3</span>, <span class="ruby-value">:msg</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'Factura duplicada'</span>}
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- validateNumdoc-source -->
          
        </div>

        

        
      </div><!-- validateNumdoc-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.12.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

